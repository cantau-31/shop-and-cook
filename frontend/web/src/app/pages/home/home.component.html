<section class="hero-section py-5">
  <div class="container hero-grid">
    <div class="hero-copy">
      <p class="hero-eyebrow text-uppercase mb-2">Shop & Cook</p>
      <h1 class="display-5 fw-bold mb-3">
        Des recettes modernes pour simplifier vos courses
      </h1>
      <p class="text-muted mb-4">
        Mixez vos envies, planifiez vos menus et sauvegardez vos trouvailles en
        un instant. Shop & Cook rassemble inspirations et organisation pour
        cuisiner sereinement.
      </p>
      <div class="hero-actions">
        @if (!(authService.isAdmin())) {
        <a class="btn btn-primary btn-lg" routerLink="/recipes/new">
          Créer une recette
        </a>
        }
        <a class="btn btn-outline-primary btn-lg" href="#recipes">
          Explorer les recettes
        </a>
      </div>
      <!-- <div class="hero-stats">
        <div class="stat-card">
          <span class="stat-value">{{ totalItems || "450+" }}</span>
          <span class="stat-label">recettes partagées</span>
        </div>
        <div class="stat-card">
          <span class="stat-value">94%</span>
          <span class="stat-label">d'utilisateurs satisfaits</span>
        </div>
        <div class="stat-card">
          <span class="stat-value">24 h</span>
          <span class="stat-label">pour valider une recette</span>
        </div>
      </div> -->
    </div>
    <!-- <div class="hero-visual" aria-hidden="true">
      <div class="visual-card">
        <div class="visual-header">
          <span class="dot"></span>
          <span class="dot"></span>
          <span class="dot"></span>
        </div>
        <h3 class="mb-2">Menu de la semaine</h3>
        <ul class="visual-list">
          <li>
            <span class="label">MIDI</span>
            <span class="value">Bowl thaï croustillant</span>
          </li>
          <li>
            <span class="label">SOIR</span>
            <span class="value">Lasagnes ricotta & pesto</span>
          </li>
          <li>
            <span class="label">DESSERT</span>
            <span class="value">Crème citron verveine</span>
          </li>
        </ul>
        <div class="visual-footer">
          <span class="badge">Courses prêtes</span>
          <span class="badge outline">Gain ~35 min</span>
        </div>
      </div>
    </div> -->
  </div>
</section>

<!-- <section class="container highlight-grid">
  <div class="highlight-card">
    <h3>Recherche multi-critères</h3>
    <p>
      Trouvez le plat idéal selon vos envies, le temps disponible et la
      difficulté.
    </p>
  </div>
  <div class="highlight-card">
    <h3>Favoris synchronisés</h3>
    <p>Marquez vos coups de coeur et retrouvez-les sur tous vos appareils.</p>
  </div>
  <div class="highlight-card">
    <h3>Communauté active</h3>
    <p>Des recettes vérifiées et notées par des foodies passionnés.</p>
  </div>
</section> -->

<section class="container mb-4" id="recipes">
  <div class="glass-panel search-panel p-4 mb-3">
    <form
      class="d-flex flex-column flex-md-row gap-3 align-items-stretch"
      (ngSubmit)="onSearch()"
    >
      <div class="flex-grow-1">
        <label class="form-label text-muted small">Recherche rapide</label>
        <div class="input-group">
          <input
            type="text"
            class="form-control"
            name="searchTerm"
            [(ngModel)]="searchTerm"
            (ngModelChange)="onSearchTermChange($event)"
            placeholder="Recette, ingrédient, auteur..."
          />
          <button class="btn btn-primary" type="submit">Rechercher</button>
        </div>
      </div>
      <div class="filters-toggle">
        <button
          class="btn btn-outline-secondary w-100"
          type="button"
          (click)="toggleFilters()"
        >
          {{ showFilters ? 'Masquer les filtres' : 'Afficher les filtres' }}
        </button>
      </div>
    </form>
  </div>
  @if (showFilters) {
  <div class="glass-panel search-panel mb-3">
    <app-recipe-filters
      [categories]="categories"
      (filterChange)="onFiltersChange($event)"
    ></app-recipe-filters>
  </div>
  }
</section>

<section class="container mb-5">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="h4 mb-0">Dernières recettes</h2>
    <small class="text-muted">Résultats : {{ totalItems }}</small>
  </div>
  @if (error) {
    <div class="alert alert-danger">{{ error }}</div>
  }
  @if (loading) {
    <app-loading-spinner></app-loading-spinner>
  }
  @if (!loading) {
    <div class="row g-4">
      @for (recipe of recipes; track trackRecipe($index, recipe)) {
        <div class="col-12 col-md-6 col-lg-4">
          <app-recipe-card
            [recipe]="recipe"
            (view)="onViewRecipe($event)"
            (favorite)="onToggleFavorite($event)"
          ></app-recipe-card>
        </div>
      }
      @if (recipes && !recipes.length && !error) {
        <p class="text-center text-muted">Aucune recette trouvée.</p>
      }
    </div>
  }
  @if (totalPages > 1) {
    <nav class="d-flex justify-content-center mt-4">
      <ul class="pagination">
        <li class="page-item" [class.disabled]="page === 1">
          <button
            class="page-link"
            (click)="changePage(page - 1)"
            [disabled]="page === 1"
          >
            Précédent
          </button>
        </li>
        @for (p of pages; track p) {
          <li class="page-item" [class.active]="p === page">
            <button class="page-link" (click)="changePage(p)">{{ p }}</button>
          </li>
        }
        <li class="page-item" [class.disabled]="page === totalPages">
          <button
            class="page-link"
            (click)="changePage(page + 1)"
            [disabled]="page === totalPages"
          >
            Suivant
          </button>
        </li>
      </ul>
    </nav>
  }
</section>
