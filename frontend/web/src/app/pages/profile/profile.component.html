<div class="container py-4" *ngIf="user as currentUser">
  <div class="row g-4">
    <div class="col-12 col-lg-4">
      <div class="card shadow-sm h-100">
        <div class="card-body text-center">
          <div class="avatar mb-3 mx-auto">{{ currentUser.name[0] }}</div>
          <h4>{{ currentUser.name }}</h4>
          <p class="text-muted mb-1">{{ currentUser.email }}</p>
          <span class="badge bg-light text-dark">{{ currentUser.role | titlecase }}</span>
          <button class="btn btn-outline-primary d-block w-100 mt-3">Éditer le profil</button>
        </div>
      </div>
    </div>
    <div class="col-12 col-lg-8">
      <div class="card shadow-sm mb-4">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="card-title">Mes recettes</h5>
            <a routerLink="/recipes/new" class="btn btn-primary btn-sm">Nouvelle recette</a>
          </div>
          <div *ngIf="loadingRecipes">
            <!-- <app-loading-spinner label="Chargement des recettes..."></app-loading-spinner> -->
          </div>
          <div *ngIf="!loadingRecipes && !myRecipes.length" class="text-muted">Aucune recette créée pour le moment.</div>
          <div *ngIf="!loadingRecipes && myRecipes.length">
            <div class="table-responsive">
              <table class="table">
                <thead>
                  <tr>
                    <th>Titre</th>
                    <th>Catégorie</th>
                    <th>Note</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let recipe of myRecipes">
                    <td>{{ recipe.title }}</td>
                    <td>{{ recipe.category }}</td>
                    <td>★ {{ recipe.rating | number : '1.1-1' }}</td>
                    <td class="text-end">
                      <a class="btn btn-sm btn-outline-secondary me-2" [routerLink]="['/recipes', recipe.id, 'edit']">Éditer</a>
                      <a class="btn btn-sm btn-outline-primary" [routerLink]="['/recipe', recipe.id]">Voir</a>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="card shadow-sm mt-4">
    <div class="card-body">
      <h5 class="card-title mb-4">Mes favoris</h5>
      <!-- <app-loading-spinner *ngIf="loadingFavorites" label="Chargement des favoris..."></app-loading-spinner> -->
      <div class="row g-4" *ngIf="!loadingFavorites">
        <div class="col-12 col-md-6 col-lg-4" *ngFor="let recipe of favorites">
          <!-- <app-recipe-card [recipe]="recipe"></app-recipe-card> -->
        </div>
        <p *ngIf="!favorites.length" class="text-muted">Aucun favori pour le moment.</p>
      </div>
    </div>
  </div>
</div>
